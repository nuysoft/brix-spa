define("brix/spa",["jquery","underscore","director","URIjs/URI","page","brix/loader","URIjs/URI.fragmentQuery","URIjs/URI.fragmentURI"],function(t,e,n,r,i,a){var o=~location.search.indexOf("brix.spa.debug");return{Router:n,URI:r,Page:i,settings:{container:"#app",frame:"app/frame",target:"#main",view:"app/main"},setup:function(t){return t?(e.extend(this.settings,t),this):this.settings},start:function(){function e(e){e=location.hash.slice(1);var n="[route] "+e;o&&(console.time(n),console.group(n));var s=new r(e),c=s.path()||i.settings.view,u=s.query(!0),f=u.target||i.settings.target;o&&console.log(c,u),a.load(t(f),c,u,function(){o&&(console.groupEnd(n),console.timeEnd(n))})}var i=this;return a.load(t(this.settings.container),this.settings.frame,{},function(){var t=new n;t.on(/(.*)/,e),t.init(),i.router=t,location.hash||e(i.settings.view)}),this},stop:function(){return this},navigate:function(t){var e=r(location.href),n=r(e.fragment());n.setSearch(t),e.fragment(n.href()),i(e.href())},fragment:function(){return r(r(location.href).fragment())}}});